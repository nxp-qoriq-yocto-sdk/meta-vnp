From 04e7c80d82839ae0f43504045a1f8b9bae3e249f Mon Sep 17 00:00:00 2001
From: Bhanu Chander G <bhanu.gaddoju@nxp.com>
Date: Tue, 2 Jul 2019 17:09:41 +0530
Subject: [PATCH] updating the condition for buffer recycle

---
 drivers/net/ethernet/freescale/sdk_dpaa/dpaa_eth_sg.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/drivers/net/ethernet/freescale/sdk_dpaa/dpaa_eth_sg.c b/drivers/net/ethernet/freescale/sdk_dpaa/dpaa_eth_sg.c
index 841c320cfa4d..d3027e0171ae 100644
--- a/drivers/net/ethernet/freescale/sdk_dpaa/dpaa_eth_sg.c
+++ b/drivers/net/ethernet/freescale/sdk_dpaa/dpaa_eth_sg.c
@@ -404,7 +404,8 @@ bool dpa_buf_is_recyclable(struct sk_buff *skb,
 	 * Guarantee that both maximum size and maximum data offsets aren't
 	 * crossed.
 	 */
-	if (likely(new >= (skb->head + sizeof(void *)) &&
+	/*if (likely(new >= (skb->head + sizeof(void *)) &&*/
+	if (likely(new >= skb->head &&
 		   new >= (skb->data - DPA_MAX_FD_OFFSET) &&
 		   skb_end_pointer(skb) - new <= DPA_RECYCLE_MAX_SIZE)) {
 		*new_buf_start = new;
-- 
2.17.1

